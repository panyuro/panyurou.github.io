---
title: 知识点汇总
date: 2022-08-23 16:18:03
tags:
password: 19980617pyr
categories: 
---

# 1. 自我介绍

面试官你好，我叫潘雨柔，来自西安邮电大学，拥有4年的后端开发经验。 1年左右前端开发经验，初此之外，
还在团队中担当一些运维的工作。

分别在互联网公司和外企工作了两年，第一家公司主要做的是SASS业务，包括在线表单以及用户体验在线分析工具
第二家主要是给葫芦岛做的一个工业数字化项目，包括排产，供应链，物流等
很高兴参加这次面试，谢谢

# 2 优点和缺点

### 1 优点：

- 学习能力强，从工作到现在，分别接触过Java，ruby，kotlin, react ,vue 五门语言，除了react不太熟练，只写了一个月，其他的都可以保证完成基本的业务

- 工作上闭环能力强，只要我负责的工作不论大小，哪怕是刚入职第一家单位，什么都不会实习的时候，满公司问人，也要保证它会跟进到真正结束。当时入职三个月的时候，领导给我涨工资就是觉得我学习能力强，且责任心强
- 善于发现当前团队中可改进的地方，并进行了优化。如：入职西门子时，由于是工业数字化团队，很多地方和我之前所在的互联网公司不同：
  - 代码风格，没有代码审查。有的同事全篇的magic字符，方法动辄几百行，命名不一致，过⻓参数列等等有很多代码的坏味道，非常影响后期的维护，于是在和领导沟通后，进行了一次关于代码坏味道的分享，后续又组织每周三一次代码审查，提高了整个团队的代码质量
  - 升级方式，不论前端还是后端，都是使用开发环境将编译好的jar包/静态文件复制到跳板机，再从跳板机复制到生产环境。尤其后端基本7，8个微服务每次都要复制，再执行kill, java -jar 整个升级流程非常重，之前公司是使用的jenkins进行持续集成的，但由于目前的同事没使用过，所以没有对比性，在和领导沟通后，进行了研究将当时前后端升级都放在了jenkins，极大的提高了大家升级的效率，现在升级只需要点击，这个做完后得到了同事和领导的很多正反馈
  - 日志查看方式，之前是将log复制出来，自己搜索关键字，现在搭建了ELK，通过关键词可以直接过滤，日志查看更方便
  - 包括引入flyway后续不用手动执行SQL，引入docker-compose管理中间件, 现在在新的机器上只需要执行docker-compose up 就可以一键启动redis, mq,nginx, pg等

### 2 缺点：

- **技术知识不够全面：** 比如高并发，多线程的场景学习了很多理论知识，但是真正工作中遇到的场景很少，所以还需要后期来弥补
- **对待客户耐心不够**：第一家单位是有产品经理的，且产品经理有一定的开发经验，所以沟通开发起来效率很高，但目前的公司由于没有产品经理，需要直接跟客户沟通，客户也是在厂子干活的，有时候沟通容易着急，现在已经在努力调整
- **工作中过于追求完美：**： 可能和第一家公司，高标准要求代码质量有关，因为第一家公司是每天下午都要代码评审，一天后端一天前端，只要代码有不合适的地方，比如有更优方案，或者可优化的空间，就会打掉，下次改完接着diff，导致在现在的公司，对工时有要求的情况，后面时间总是把控不到位，还被同事笑称有代码洁癖

# 3. sith-mes 是干什么的？

## 1. 项目简介

这个是给葫芦岛做的一个工业数字化项目，从19年开始做的，主要包括排产，供应链，物流，设备，数采等多个模块。

是一个前后端分离项目，前端是用的vue，后端是SpringCloud Netflix那一套：注册中心eureka， 网关：spring cloud gateway, 服务调用：Feign，使用springdata Jpa做持久层框架，数据库使用的是pgsql，influxDb，消息中间件是：rabbitMQ， 定时任务：xxlJob, 工作流：activiti6 ,  使用docker部署jenkins和elk, nginx等中间件。

我在其中主要开发的模块是用户和采购模块以及运维

## 2. 各模块详细描述


1. **生产计划：** APS: 高级计划排产。 包括项目计划，工单，工序。APS系统可以基于生产需求、资源约束、库存水平等因素，自动生成最优的生产计划，以实现生产资源的有效利用和生产成本的最小化。
1. **供应链管理：** 包括PR（PR需求，报价，询价），PO（全部PO，PO技术澄清），供应商管理，发货清单，发货任务，外检管理
2. **物流管理：**物流到货管理，异常到货管理（发起，待办，列表）、物料配送
3. **质量管理：** 105入场检验，106退货，产品终检，退库检验，量器具管理
4. **设备管理：** 设备档案、设备维修、设备故障管理、设备状态
5. **看板**：数据的整理和以图表的方式展示出来
6. **车床数采：**使用opc采集主轴数据（倍率，负载，运转状态，进给速度，进给倍率）

## 3. 用户模块

### 1. 用户登录的实现

1. 登录页面重构成前后端分离，（引入了springCloud gateway）
   1. 用户输入账户密码，手机号验证码，点击提交
   2. 后端根据用户密码(数据库存储的是MD5加密过的密码)去用户表里查询是否有当前用户
   3. 存在当前用户，则检查验证码是否匹配
   4. 匹配则创建以及保存jwt, 将jwt返回给前端
   5. 前端将jwt存储在localStorage里
   6. 前端调用axios请求时，将jwt带进request header 里的【Authorization】
   7. 后端在common 模块里，增加拦截器，从request取出【Authorization】，解析jwt为current User，每个引入了common模块的微服务自己分别将jwt解析成currentUser,  并将其存储在TransmittableThreadLocal里
   8. 权限拦截器，对当前currentUser判断是否有当前url的访问权限
   9. 后面在当前微服务中通过feign或者restTemplate去请求其他微服务接口时，分别通过增加feign拦截器和restTemplate拦截器，对jwt进行

  加入了网关：

  		1. 从第7步开始更新，请求到了后端后，全进入网关，后端网关接收到jwt, 在网关拦截器解析成了currentUser，放到request的header里   URLEncoder.encode(EmJsonUtils.objectToJson(EmRequestHolder.getCurrentUser()), UTF_8)
  		2. 在common模块增加拦截器，解析header获取到current User
  		3. 当前微服务中通过feign或者restTemplate去请求其他微服务接口时，分别通过增加feign拦截器和restTemplate拦截器，将currentUser 放到header里（因为之前的逻辑是从request的header里取【Authorization】，解析jwt，现在网关都解析过了，发给微服务的请求里已经没有【Authorization】，只有解析过的currentUser）

**网关带来的其他好处：**

1. 之前URL权限检验的时候，某些URL需要设置成白名单，最初是在每个微服务里通过common模块去check权限的，就需要在每个微服务模块里都配置白名单的URL列表，现在改到网关里后只需要在网关配置即可
2. 老模式：将jwt放到了admin-common里，每个微服务都需要自己鉴权，处理多次，有性能消耗
   3. 之前客户端需要知道每个微服务的具体端口，现在只需要知道网关即可（也就是nginx的配置）

### 2. 权限系统的设计

[权限系统的设计](https://pyr9.github.io/%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/#4-%E5%AE%9E%E6%88%98%E6%BC%94%E7%BB%83)

### 3. 除了RBAC还有哪些实现权限的方式？

[除了RBAC还有哪些实现权限的方式](https://pyr9.github.io/%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/#5-%E9%99%A4%E4%BA%86RBAC%E8%BF%98%E6%9C%89%E5%93%AA%E4%BA%9B%E5%AE%9E%E7%8E%B0%E6%9D%83%E9%99%90%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9F)

## 4. 采购模块：

### 1. 采购模块流程

### 2. 批量上传文件实现逻辑

## 5. 运维部分：

1. 搭建了Jenkins替代原始的前后端升级方式

   git clone -> maven clean install -> jar 包推送到客户服务器 -> 执行kill -9 & nohub java -jar -> 飞书webhook通知                                                                                                                                                                                                                                                                                                                                                                             

2. 搭建ELK

   - 使用filebeat去收集日志文件，log stash对日志进行了过滤，以及统一格式，存储在ES中，使用cabana搜索
   - 索引占用空间过大，设置索引定期清除策略

## 6. 代码审查：

1. [分享了代码坏味道](https://pyr9.github.io/%E9%87%8D%E6%9E%84-%E6%94%B9%E5%96%84%E4%BB%A3%E7%A0%81%E5%B7%B2%E6%9C%89%E7%9A%84%E8%AE%BE%E8%AE%A1/)

# 4. Howxm是干什么的？

浩客项目是一个客户体验SASS平台，主要业务包括创建问卷项目，生成投放连接，将投放收集到的数据进行融合，汇总，分析，包括绘制客户旅程地图，绘制仪表盘，柱形图，这形图等，还包括了一些基本的业务，比如客户的导入，展示，筛选，删除等。

这个项目主要用到的技术是springboot, 数据库用的是postgresql 消息中间件用的是kafka，需要对大数据进行存储，插入，查询时选用了Clickhouse进行性能优化。

# 5. automation是干什么的？

自动化项目是从金数据项目独立出来的项目，主要的业务包括给表单设置一个触发的规则和执行的动作，当条件达到的时候。比如有新数据提交，数据更新或者到达了指定的时间，就执行设置的动作，包括推送数据到企业微信，webhook，短信，邮件的发送。

这个项目主要使用到的技术是SpringBoot,mybatis, 数据库用的是mongoDb消息中间件采用的是Rabbitmq，前后端通过g raphql进行的分离。
