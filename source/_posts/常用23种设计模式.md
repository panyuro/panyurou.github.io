---
title: 常用23种设计模式
date: 2023-10-03 17:34:59
tags:
categories: 设计模式
---

# 1 概念

## 1 定义

*设计模式是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。*

**优点**

- 重用代码
- 让代码更容易被他人理解
- 保证代码可靠性

## 2 六大原则

- **开闭原则**：**对扩展开放，对修改关闭**。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。
- **里氏代换原则**：任何基类可以出现的地方，子类一定可以出现。
- **依赖倒转原则**：针对接口编程，依赖于抽象而不依赖于具体。
- **接口隔离原则**：使用多个隔离的接口，比使用单个接口要好。
- **迪米特法则**：又称最少知道原则。一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。
- **合成复用原则**：尽量使用合成/聚合的方式，而不是使用继承。

# 2 分类

## 1 创建型模式（五种）

这些模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。

[单例模式](https://pyr9.github.io/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/)

[工厂模式](https://pyr9.github.io/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/)

[抽象工厂模式](https://pyr9.github.io/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/)

[建造者模式](https://pyr9.github.io/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/)

[原型模式](https://pyr9.github.io/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/)

## 2. 结构型模式（七种）

这些模式关注对象之间的组合和关系，旨在解决如何构建灵活且可复用的类和对象结构。

[适配器模式](https://pyr9.github.io/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/)

[装饰器模式](https://pyr9.github.io/%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/)

[代理模式](https://pyr9.github.io/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/)

[外观模式](https://pyr9.github.io/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/)

[桥接模式](桥接模式)

[组合模式](https://pyr9.github.io/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/)

[享元模式](https://pyr9.github.io/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/)

## 3 行为型模式（十一种）

这些模式关注对象之间的通信和交互，旨在解决对象之间的责任分配和算法的封装。

[策略模式](https://pyr9.github.io/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/)

[模板方法模式](https://pyr9.github.io/%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/)

[观察者模式](https://pyr9.github.io/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/)

[迭代器模式](https://pyr9.github.io/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/)

[责任链模式](https://pyr9.github.io/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/)

[命令模式](https://pyr9.github.io/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/)

[备忘录模式](https://pyr9.github.io/%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/)

[状态模式](https://pyr9.github.io/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/)

[访问者模式](https://pyr9.github.io/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/)

[中介者模式](https://pyr9.github.io/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/)

[解释器模式](https://pyr9.github.io/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/)



# 3 对比

## 1 享元模式与单例模式的区别

- 享元设计模式是一个类有很多对象，而单例是一个类仅一个对象。

- 享元模式是为了节约内存空间，提升程序性能，而单例模式则主要是出于共享一个实例的目的。

## 2 桥接模式和组合模式

- 组合模式强调部分和整体的组合
- 桥接模式强调平行级别上不同类的组合

## 3 桥接模式和适配器模式

共同点：都是为了让两个东西配合工作

区别

- 适配器是改变已有的接口，使他们可以配合
- 桥接是使类的抽象和实现分离开，使层次结构组合起来

## 4 模版方法模式和策略模式

- 策略模式可以改变算法的流程，模版方法模式不可以

# 4 项目使用

1. 单例模式：
   - 线程池：Executors.newSingleThreadExecutor确保只有一个线程实例在运行。
   - 数据库连接池： getInstance

1. 工厂模式：
   - 单元测试通过UserFactory， 创建测试数据
   - jpaQueryFactory创建一个select查询
2. 建造者模式：lombok的@Builder，创建对象。
3. 原型模式：`java.lang.Cloneable`接口和`clone()`方法（原型模式：通过克隆现有的对象来创建新的对象）
4. 代理模式：AOP切面，
5. 模版方法模式：定义算法框架，允许子类重写某些步骤而不改变整体结构。
   - 工作流，conpleteFeedback(完成后回调)， getProcessDefinitionKey(获取流程定义key): 基类定义框架，子类实现
   - beforeSaveTrigger/afterSaveTrigger
6. 观察者模式：ApplicationEventPublisher.publishEvent(aaa), @EventListener handle 
7. 责任链模式：Activiti 使用责任链模式处理任务分配和流程流转。`Command` 接口定义了一组操作命令，不同的 `Command` 实现类负责具体的业务逻辑（如启动流程、完成任务），`CommandExecutor` 将多个命令串联起来，按顺序执行。

